## dataframe 병합
두 데이터 프레임을 병합시키는 방법은 concat 함수 또는 merge함수를 사용한다. 먼저 concat함수를 살펴보면 두 데이터프레임을 위/아래 또는 왼쪽 오른쪽으로 연결하는 역할을 한다.

### CONCAT - 단순 연결
pd.concat([df1,df2],axis=0 or 1)
해당 함수를 사용하게 되면 axis(축)에 따라 병합되는데 axis=0은 열을 뜻한다. 따라서 해당 프레임워크는 위/아래로 병합되며, 컬럼명이 다를 경우
값이 없는 부분은 Nan으로 표시한다.
그리고 axis=1 일 경우 df1 컬럼명 + df2컬럼명의 형식으로 왼쪽과 오른쪽 데이터로 병합된다. 이때 df1과 df2의 컬럼명이 같더라도 합쳐지지 않는다.
이를 통해 Union도 구현할 수 있다.

### merge = 두 데이터 프레임 병합
RDBMS과 비슷하게 Join시스템을 제공한다.
pd.merge(df1,df2,  how='inner', on='id')
해당 함수를 사용하게 되면 df1과 df2를 병합하는데, how 조건에 따라서 
inner,outer(=Full outer Join을 뜻함),left,right 등의 조인 방식이 결정된다. 또한 on은 조건절을 의미한다.
위 함수의 의미는 df1 데이터 프레임과, df2 데이터프레임을 inner join하며 그 조건은 id라는 뜻이다.
그리고 index를 통한 merge도 제공한다.

### index
index지정은
df.set_index(컬럼명)
그 후 index로 지정 컬럼명을 원상복구 싶어하고 싶을 경우
df.reset_index(컬럼명)
만약 이때 reset_index 전에 set_index로 다른 컬럼을 지정할 경우 기존의 index는 사라진다.

### dropna, fillna
df.dropna()는 데이터프레임에서 모든 N/A 행을 제거한다.
만약 특정 컬럼의 null값을 포함하는 행만 삭제하고 싶다면 subset 옵션을 사용하여 다음과 같이 사용할 수 있다.
df.dropna(subset=[컬럼명,컬럼명])
그리고 fillna는 null값을 포함하는 행을 삭제하는 것이 아니라 특정 값으로 변경할 수 있다.
df.fillna(0)을 수행하게되면 데이터프레임의 모든 null값을 0으로 바꾼다. 이는 문자열로 이루어진 데이터도 바꾸기 때문에 오류를 발생시킬 수 있다.
만약 특정 컬럼의 null값을 임의의 값으로 변경하고 싶다면 다음과 같이 사용할 수 있다.
df.fillna({'name':'무명','age':1})
### groupby()
특정 값을 기준으로 RDBMS의 groupby를 구현할 수 있다.
만약 name이라는 이름으로 group지어 총계를 구한 데이터프레임을 원한다면 다음과 같이 수행할 수 있다.
df.groupby('name').sum()

### index로 특정행 조회하기
df[ df.index == '일치']

### 조건으로 특정행 조회하기
df[ (df[컬럼명] >= 4) & (df[컬럼명] == 0) ]
이 때 and 조건의 경우 &을 사용하고 or 조건의 경우 |가 사용되는데,
소괄호는 구분을 위해 권장된다.


### column type변경
df.astype({'name'}:'object','age':'int64'})
이때 null값이 있을 경우 오류가 발생하므로 fillna 또는 dropna를 수행하여야 한다. 

### 중복행 확인하기
df.duplicated()

### 중복된 행만 조회하기
df[df.duplicated()]

### 중복된 행 삭제하기
df.drop_duplicates(subset=[기준이되는 컬럼명],keep='last')
중복된 행을 삭제하면서 subset은 기준을 지정하여 삭제하는 것을 뜻하는데, 해당 옵션이 없으면 특정 행과 행끼리 중복여부를 판단하여 삭제한다. keep은  삭제할때 어떤 행을 남겨둘 것인지 지정하는 옵션인데, last는 마지막을 남기고, first는 처음을 남긴다.

### 기본 결측치 제어 사용하지 않기
만약 'NA'가 실제 사용하는 값이라도 pandas에서는 이를 결측치로 처리한다. 따라서 해당 값을 쓰기 위해서는 read_csv의 옵션으로 keep_defaulut_na = False의 옵션을 지정해야 한다. 이 때 na_values= 옵션을 사용하여, 무엇이 na의 값인지 지정할 수 있다.

### 데이터 컬럼명과 그 값을 변경하기
만약 데이터 프레임의 컬럼명만 변경하고 싶을 때는
df.columns = [~,~,~] 등으로 값에 맞게 지정하면 컬럼명은 바뀐다. 단, 그 값은 여전히 바뀌지 않는다. 이때 컬럼명과 그 값을 한번에 옮기고 싶을 때는 다음과 같이 할 수 있다.
df = df[[컬럼명3,컬럼명1,컬럼명2]] 이런식으로 기존의 데이터프레임에서 컬럼명을 원하는 순서에 맞게 지정하여 다시 df라는 변수에 저장하는 방식이다.
그런데 만약 컬럼명이 무수히 많다면 해당 리스트를 손으로 적기가 어렵기 때문에 다음의 방식을 이용할 수 있다.
col = df.columns.tolist() -> 컬럼명을 리스트로 바꾼다.
col.remove('옮기고 싶은 컬럼명') -> 옮기고 싶은 컬럼명을 리스트에서 삭제한다.
col.insert(1,'옮기고 싶은 컬럼명') -> 그리고 컬럼명 리스트에 원하는 컬럼명을 위치를 계산하여 삽입한다.

df = df[col] -> 컬럼명이 지정된 리스트를 넣는다.
