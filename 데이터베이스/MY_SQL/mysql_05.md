# 05 테이블과 뷰
* 목차
- 05_01_테이블 생성
- 05_02_제약조건
- 05_03_VIEW

## 05_01_테이블 생성
```
CREATE TABLE 테이블 명(
열 이름 데이터 형식 제약조건 등,
열 이름 데이터 형식 제약조건 등,  
열 이름 데이터 형식 제약조건 등,  
열 이름 데이터 형식 제약조건 등,  
열 이름 데이터 형식 제약조건 등,  
)
```

## 05_02_제약조건
* 제약조건이란 데이터의 무결성(오류가 없음)을 강화하기 위해 설정한 것이다.
* 테이블을 만들 때 데이터 형식 또한 어느 정도의 무결성을 강화할 수 있지만, 부족하다.
* 예를들어 이름이 '남'으로 시작하는 사람만 테이블에 들어가야 한다면, check (name LIKE '남%') 제약조건을 사용할 수 있다.

### 제약조건의 종류
* PRIMARY KEY - 기본키라고도 하며, NULL을 허용하지 않으며, 중복되지 않고, 고유해야하는 성질을 가진다.
* UNIQUE - 고유키라고도 하며, NULL을 허용하지만, 중복되지않고, 고유해야 하는 성질을 가진다.
* FOREIGN KEY - 외래키 라고도 하며, 기본키 또는 고유키를 참조하며, 관계를 맺는다. 이 때 참조되는 테이블을 기준테이블이라고 한다.  
즉, 외래키가 있는 테이블을 참조테이블, 기본키또는 고유키가 있는 테이블을 기준테이블이라고 한다. 만약 기준테이블에 없는 외래키를 입력하면
오류가 발생하며, 기준테이블의 그 기본키 등을 먼저 삭제, 변경(단, 참조테이블에 데이터가 없으면 작동)하려고 해도 작동하지 않는다. 따라서 참조 테이블의 키를 먼저 삭제 변경해야 한다. 외래키는 이러한 역할을 하며, 만약 기준테이블의 그 키가 삭제되거나 변경되면 외래키도 변경되게 관계를 맺게 하고 싶다면 ON DELETE CASCADE, ON UPDATE CASCADE를 사용하면 된다.
* CHECK는 조건을 설정하여 특정 조건을 만족하는 값만 입력이 될 수 있게 하는 제약조건이다.
* DEFAULT는 아무것도 입력하지 않았을 때 가지게 되는 값이다.
* null은 null값을 허용한다.

## 05_03_VIEW
* VIEW란 테이블이다. 뷰를 통해 조회하면 SELECT문으로 실제 테이블을 불러오는 가상의 테이블이다.
* 왜 쓰는지가 중요하다. 데이터베이스는 보안이 가장 중요하다. 뷰를 사용하면 특정 테이블의 최소한의 정보만 공유하면서 업무를 수행할 수 있게된다.
* 또한 복잡한 쿼리문을 간단하게 만들 수 있다.
* 그렇다면 뷰에서는 아무거나 해도 테이블에 영향이 없을까? 그렇지 않다. 만약 뷰에 INSERT INTO를 하게 된다면 테이블에도 그 내용이 반영된다. 그러나 언제나 그렇지는 않다. 테이블에 NOT NULL 필드가 있지만, 뷰에는 NOT NULL 필드를 가져오지 않았다면 그 필드에는
INSERT INTO 할 수 없기 때문에 변경을 할 수 없다. 이 외에도 보안을 유지하는 방법이 있지만, 뷰도 테이블을 영향을 줄 수 있다.
* 단순뷰(단일 테이블), 복합뷰(2개 이상 조인하는 뷰) - 복합뷰는 실제테이블을 다룰 수 없다.

### VIEW 사용문구
* CREATE VIEW, CREATE OR REPLACE VIEW : 생성 또는 이미 view가 있으면 덮어씌우면서 생성
* 뷰 테이블의 select문 필드에 공백이 있으면 백틱(`)으로 묶음
* ALTER VIEW, DROP VIEW
* DESCRBE view이름, DESC view이름 - 뷰의 스키마를 보여준다. 단, primary key등의 정보는 확인 X
* SHOW CREATE VIEW view이름 : view의 소스코드
* UPDATE, INSERT INTO, DELETE - 뷰에서 접근할 수 있는데이터는 실제 데이터에 영향을 주지만, 뷰에서 접근할 수 없다면 영향이 없다.
* WITH CHECK OPTION : 뷰를 생성할 때 SQL문 가장 마지막에 입력했다면 뷰에서 설정한 어떤 값의 범위가 벗어나는 값은 입력되지 않도록 한다.
* CHECK TABLE view이름 : 참조하는 테이블의 상태를 보여준다.(삭제되었는지 등등)